var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};function r(e){var t=Math.atan2(e[7],e[8]),r=Math.atan2(-e[6],Math.sqrt(e[7]*e[7]+e[8]*e[8])),n=Math.atan2(e[3],e[0]);return[180*t/Math.PI,180*r/Math.PI,180*n/Math.PI]}e.d(t,{J:()=>d});const n={1:"String",2:"Bool",3:"Int",4:"Float",5:"Double",6:"UDim",7:"UDim2",8:"Ray",9:"Faces",10:"Axes",11:"BrickColor",12:"Color3",13:"Vector2",14:"Vector3",15:"Vector2int16",16:"CFrame",17:"CFrameQuat",18:"Token",19:"Reference",20:"Vector3int16",21:"NumberSequence",22:"ColorSequence",23:"NumberRange",24:"Rect",25:"PhysicalProperties",26:"Color3uint8",27:"Int64",28:"SharedString",29:null,30:"Optional",31:"UniqueId",32:"Font"},o={2:[1,0,0,0,1,0,0,0,1],3:[1,0,0,0,0,-1,0,1,0],5:[1,0,0,0,-1,0,0,0,-1],6:[1,0,-0,0,0,1,0,-1,0],7:[0,1,0,1,0,0,0,0,-1],9:[0,0,1,1,0,0,0,1,0],10:[0,-1,0,1,0,-0,0,0,1],12:[0,0,-1,1,0,0,0,-1,0],13:[0,1,0,0,0,1,1,0,0],14:[0,0,-1,0,1,0,1,0,0],16:[0,-1,0,0,0,-1,1,0,0],17:[0,0,1,0,-1,0,1,0,-0],20:[-1,0,0,0,1,0,0,0,-1],21:[-1,0,0,0,0,1,0,1,-0],23:[-1,0,0,0,-1,0,0,0,1],24:[-1,0,-0,0,0,-1,0,-1,-0],25:[0,1,-0,-1,0,0,0,0,1],27:[0,0,-1,-1,0,0,0,1,0],28:[0,-1,-0,-1,0,-0,0,0,-1],30:[0,0,1,-1,0,0,0,-1,0],31:[0,1,0,0,0,-1,-1,0,0],32:[0,0,1,0,1,-0,-1,0,0],34:[0,-1,0,0,0,1,-1,0,0],35:[0,0,-1,0,-1,-0,-1,0,-0]};function a(e,t,r,n){const o=new Array(r),a=4*r;for(let i=0;i<r;i++){let s=e.getUint8(t+i)<<24;s+=e.getUint8(t+(i+r)%a)<<16,s+=e.getUint8(t+(i+2*r)%a)<<8,s+=e.getUint8(t+(i+3*r)%a),o[i]=n?n(s):s}return o}function i(e,t,r,n){const o=new Array(r);for(let a=0;a<r;a++){let r=e.getUint8(t+a);o[a]=n?n(r):r}return o}function s(e,t,r){return a(e,t,r,(e=>e%2==1?-(e+1)/2:e/2))}function f(e,t){var r=e.getUint32(t,!0),n="";for(let o=0;o<r;o++)n+=String.fromCharCode(e.getUint8(t+4+o));return[n,r]}function l(e,t,r){return s(e,t,r)}function c(e,t,r){return a(e,t,r,(e=>function(e){const t=e>>>24;if(0===t)return 0;const r=2**(t-127)*(1+(e>>>1&8388607)/8388607);return 1&e?-r:r}(e)))}function u(e,t,a){const l=e.getUint8(t),u=n[l];var h=[];switch(u){case"String":var g=0;for(let r=0;r<a;r++){const[n,o]=f(e,t+1+g);h[r]=n,g+=o+4}break;case"Bool":for(let r=0;r<a;r++)h[r]=1===e.getUint8(t+1+r);break;case"Int":h=s(e,t+1,a);break;case"Float":h=c(e,t+1,a);break;case"Double":for(let r=0;r<a;r++)h[r]=e.getFloat64(t+1+8*r,!0);break;case"UDim":const n=c(e,t+1,a),l=s(e,t+1+4*a,a);for(let e=0;e<a;e++)h[e]={Scale:n[e],Offset:l[e]};break;case"UDim2":case"Ray":case"Faces":case"Axes":case"BrickColor":case"Vector2":case"Vector2int16":break;case"Color3":var U=c(e,t+1,a),b=c(e,t+1+4*a,a),d=c(e,t+1+8*a,a);for(let e=0;e<a;e++)h[e]={R:U[e],G:b[e],B:d[e]};break;case"Vector3":const u=c(e,t+1,a),C=c(e,t+1+4*a,a),m=c(e,t+1+8*a,a);for(let e=0;e<a;e++)h[e]={X:u[e],Y:C[e],Z:m[e]};break;case"CFrame":g=0;var y=[];for(let r=0;r<a;r++){var p=[0,0,0],v=e.getUint8(t+1+g);if(g+=1,0!==v)p=[0,0,0,...o[v]];else for(let r=0;r<9;r++)p[r+3]=e.getFloat32(t+1+g,!0),g+=4;y[r]=p}const w=c(e,t+1+g,a),k=c(e,t+1+g+4*a,a),B=c(e,t+1+g+8*a,a);for(let e=0;e<a;e++){const[t,n,o]=r(y[e].slice(3));y[e][0]=w[e],y[e][1]=k[e],y[e][2]=B[e],h[e]={Position:{X:w[e],Y:k[e],Z:B[e]},Orientation:{X:t,Y:n,Z:o},Components:y[e]}}break;case"Color3uint8":U=i(e,t+1,a),b=i(e,t+1+a,a),d=i(e,t+1+2*a,a);for(let e=0;e<a;e++)h[e]={R:U[e]/255,G:b[e]/255,B:d[e]/255};break;default:h=null}return{type:u,values:h}}let h=function(e,t){return(void 0===e.outputBuffer||e.outputBuffer.byteLength<t)&&(e.outputBuffer=new ArrayBuffer(t+65535&2147418112)),e.outputBuffer};function g(){this.hashTable=void 0,this.outputBuffer=void 0}function U(e,t){const r=[String.fromCharCode(e.getUint8(t+0)),String.fromCharCode(e.getUint8(t+1)),String.fromCharCode(e.getUint8(t+2)),String.fromCharCode(e.getUint8(t+3))].join(""),n=e.getUint32(t+4,!0),o=e.getUint32(t+8,!0),a=0==n?o:n,i=new Uint8Array(a);for(var s=0;s<a;s++)i[s]=e.getUint8(t+16+s);return{signature:r,compressedLength:n,uncompressedLength:o,dataLength:a,payload:0!=n?g.prototype.decodeBlock(i,0,o):i}}g.prototype={flavor:"js",init:function(){return Promise.resolve()},reset:function(){this.hashTable=void 0,this.outputBuffer=void 0},bytesInUse:function(){let e=0;return void 0!==this.hashTable&&(e+=this.hashTable.byteLength),void 0!==this.outputBuffer&&(e+=this.outputBuffer.byteLength),e},encodeBlock:function(e,t){if(e instanceof ArrayBuffer)e=new Uint8Array(e);else if(e instanceof Uint8Array==0)throw new TypeError;return function(e,t,r){let n=t.byteLength;if(n>=2113929216)throw new RangeError;let o=n-12,a=n-5;void 0===e.hashTable&&(e.hashTable=new Int32Array(65536)),e.hashTable.fill(-65536),t instanceof ArrayBuffer&&(t=new Uint8Array(t));let i=r+((s=n)>2113929216?0:s+(s/255|0)+16);var s;let f=new Uint8Array(h(e,i),0,i),l=0,c=r,u=0;for(;;){let r,n,i=t[l]<<8|t[l+1]<<16|t[l+2]<<24;for(;l<=o;){i=i>>>8|t[l+3]<<24;let o=(40503*i&65535)+(31153*i>>>16)&65535;if(r=e.hashTable[o],e.hashTable[o]=l,n=l-r,n<65536&&t[r+0]===(255&i)&&t[r+1]===(i>>>8&255)&&t[r+2]===(i>>>16&255)&&t[r+3]===(i>>>24&255))break;l+=1}if(l>o)break;let s=l-u,h=l;for(l+=4,r+=4;l<a&&t[l]===t[r];)l+=1,r+=1;h=l-h;let g=h<19?h-4:15;if(s>=15){f[c++]=240|g;let e=s-15;for(;e>=255;)f[c++]=255,e-=255;f[c++]=e}else f[c++]=s<<4|g;for(;s--;)f[c++]=t[u++];if(0===h)break;if(f[c+0]=n,f[c+1]=n>>>8,c+=2,h>=19){let e=h-19;for(;e>=255;)f[c++]=255,e-=255;f[c++]=e}u=l}let g=n-u;if(g>=15){f[c++]=240;let e=g-15;for(;e>=255;)f[c++]=255,e-=255;f[c++]=e}else f[c++]=g<<4;for(;g--;)f[c++]=t[u++];return new Uint8Array(f.buffer,0,c)}(this,e,t)},decodeBlock:function(e,t,r){if(e instanceof ArrayBuffer)e=new Uint8Array(e);else if(e instanceof Uint8Array==0)throw new TypeError;return function(e,t,r,n){let o=t.byteLength,a=new Uint8Array(h(e,n),0,n),i=r,s=0;for(;i<o;){let e=t[i++],r=e>>>4;if(0!==r){if(15===r){let e;for(;e=t[i++],255===e;)r+=255;r+=e}let e=i+r;for(;i<e;)a[s++]=t[i++];if(i===o)break}let n=t[i+0]|t[i+1]<<8;if(0===n||n>s)return;if(i+=2,r=4+(15&e),19===r){let e;for(;e=t[i++],255===e;)r+=255;r+=e}let f=s-n,l=s+r;for(;s<l;)a[s++]=a[f++]}return a}(this,e,t,r)}};const b=[60,114,111,98,108,111,120,33,137,255,13,10,26,10];function d(e){const t=performance.now(),r=new DataView(e);for(var n=0,o=0;o<e.byteLength;o++)if(r.getUint8(o)==b[0]){n=o;break}var a,i,s=[];for(o=0;o<14;o++)s.push(r.getUint8(o+n));console.assert((i=b,(a=s).length==i.length&&(a.forEach(((e,t)=>{if(e!=i[t])return!1})),!0)),"Invalid file signature."),console.log("Valid file signature.");var c=n+14,h=r.getUint16(c,!0);console.log("Version:",h);var g=c+2,d={classCount:r.getUint32(g,!0),instanceCount:r.getUint32(g+4,!0)};console.log("Header:",d);for(var y=g+16,p={},v=[],C=[],m=[];y<e.byteLength&&"END\0"!==p.signature;){y+=16+(p=U(r,y)).dataLength;const e=new DataView(p.payload.buffer);if("META"==p.signature){const t=e.getUint32(0,!0),r=[];var w=4;for(let n=0;n<t;n++){const[t,n]=f(e,w);w+=n+4;const[o,a]=f(e,w);w+=a+4,r.push({key:t,value:o})}}else if("SSTR"==p.signature);else if("INST"==p.signature){const t=e.getInt32(0,!0),[r,n]=f(e,4),o=(e.getUint8(8+n,!0),e.getUint32(8+n+1,!0)),a=l(e,8+n+1+4,o),i=[];for(let t=0;t<o;t++)i.push(e.getUint8(8+n+1+4+o+t));C[t]={className:r,instances:[]};var k=0;for(let e=0;e<o;e++)v[k+=a[e]]={ClassName:r,Children:[]},C[t].instances.push(k)}else if("PROP"==p.signature){const t=e.getInt32(0,!0);var[B,A]=f(e,4);const r=u(e,8+A,C[t].instances.length);if(r.values)for(let e=0;e<C[t].instances.length;e++){const n=C[t].instances[e];"Color3uint8"==(B=B.charAt(0).toUpperCase()+B.slice(1))&&(B="Color3"),v[n][B]=r.values[e]}}else if("PRNT"==p.signature){const t=e.getUint32(1,!0),r=l(e,5,t),n=l(e,5+4*t,t);var T=0,S=0;for(let e=0;e<t;e++){T+=r[e],S+=n[e];const t=v[T];S<0?m[T]=t:v[S].Children.push(t)}}}return console.log("Finished decoding file.\nTime elapsed:",performance.now()-t,"ms"),m}var y=t.J;export{y as decode};