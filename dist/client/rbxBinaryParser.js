var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{J:()=>h});const n={1:"String",2:"Bool",3:"Int",4:"Float",5:"Double",6:"Udim",7:"Udim2",8:"Ray",9:"Faces",10:"Axes",11:"BrickColor",12:"Color3",13:"Vector2",14:"Vector3",15:"Vector2int16",16:"CFrame",17:"CFrameQuat",18:"Token",19:"Reference",20:"Vector3int16",21:"NumberSequence",22:"ColorSequence",23:"NumberRange",24:"Rect",25:"PhysicalProperties",26:"Color3uint8",27:"Int64",28:"SharedString",29:null,30:"Optional",31:"UniqueId",32:"Font"};function r(e,t,n,r){const o=new Array(n),i=4*n;for(let a=0;a<n;a++){let s=e.getUint8(t+a)<<24;s+=e.getUint8(t+(a+n)%i)<<16,s+=e.getUint8(t+(a+2*n)%i)<<8,s+=e.getUint8(t+(a+3*n)%i),o[a]=r?r(s):s}return o}function o(e,t,n){return r(e,t,n,(e=>e%2==1?-(e+1)/2:e/2))}function i(e,t){var n=e.getUint32(t,!0),r="";for(let o=0;o<n;o++)r+=String.fromCharCode(e.getUint8(t+4+o));return[r,n]}function a(e,t,n){return o(e,t,n)}function s(e,t,n){return r(e,t,n,(e=>function(e){const t=e>>>24;if(0===t)return 0;const n=2**(t-127)*(1+(e>>>1&8388607)/8388607);return 1&e?-n:n}(e)))}function f(e,t,r){const a=e.getUint8(t),f=n[a];var l=[];switch(f){case"String":var c=0;for(let n=0;n<r;n++){const[r,o]=i(e,t+1+c);l[n]=r,c+=o+4}break;case"Bool":for(let n=0;n<r;n++)l[n]=1===e.getUint8(t+1+n);break;case"Int":l=o(e,t+1,r);break;case"Float":l=s(e,t+1,r);break;case"Double":case"UDim":case"UDim2":case"Ray":case"Faces":case"Axes":case"BrickColor":case"Color3":case"Vector2":break;case"Vector3":const n=s(e,t+1,r),a=s(e,t+1+4*r,r),f=s(e,t+1+8*r,r);for(let e=0;e<r;e++)l[e]={x:n[e],y:a[e],z:f[e]};break;case"Vector2int16":break;case"CFrame":var u=[0,0,0,0,0,0,0,0,0,0,0,0];const g=s(e,t+1+38,r),h=s(e,t+1+38+4*r,r),d=s(e,t+1+38+8*r,r);u[0]=g,u[1]=h,u[2]=d,l={Position:{x:g,y:h,z:d},Components:u};default:l=null}return{type:f,values:l}}let l=function(e,t){return(void 0===e.outputBuffer||e.outputBuffer.byteLength<t)&&(e.outputBuffer=new ArrayBuffer(t+65535&2147418112)),e.outputBuffer};function c(){this.hashTable=void 0,this.outputBuffer=void 0}function u(e,t){const n=[String.fromCharCode(e.getUint8(t+0)),String.fromCharCode(e.getUint8(t+1)),String.fromCharCode(e.getUint8(t+2)),String.fromCharCode(e.getUint8(t+3))].join(""),r=e.getUint32(t+4,!0),o=e.getUint32(t+8,!0),i=0==r?o:r,a=new Uint8Array(i);for(var s=0;s<i;s++)a[s]=e.getUint8(t+16+s);return{signature:n,compressedLength:r,uncompressedLength:o,dataLength:i,payload:0!=r?c.prototype.decodeBlock(a,0,o):a}}c.prototype={flavor:"js",init:function(){return Promise.resolve()},reset:function(){this.hashTable=void 0,this.outputBuffer=void 0},bytesInUse:function(){let e=0;return void 0!==this.hashTable&&(e+=this.hashTable.byteLength),void 0!==this.outputBuffer&&(e+=this.outputBuffer.byteLength),e},encodeBlock:function(e,t){if(e instanceof ArrayBuffer)e=new Uint8Array(e);else if(e instanceof Uint8Array==0)throw new TypeError;return function(e,t,n){let r=t.byteLength;if(r>=2113929216)throw new RangeError;let o=r-12,i=r-5;void 0===e.hashTable&&(e.hashTable=new Int32Array(65536)),e.hashTable.fill(-65536),t instanceof ArrayBuffer&&(t=new Uint8Array(t));let a=n+((s=r)>2113929216?0:s+(s/255|0)+16);var s;let f=new Uint8Array(l(e,a),0,a),c=0,u=n,g=0;for(;;){let n,r,a=t[c]<<8|t[c+1]<<16|t[c+2]<<24;for(;c<=o;){a=a>>>8|t[c+3]<<24;let o=(40503*a&65535)+(31153*a>>>16)&65535;if(n=e.hashTable[o],e.hashTable[o]=c,r=c-n,r<65536&&t[n+0]===(255&a)&&t[n+1]===(a>>>8&255)&&t[n+2]===(a>>>16&255)&&t[n+3]===(a>>>24&255))break;c+=1}if(c>o)break;let s=c-g,l=c;for(c+=4,n+=4;c<i&&t[c]===t[n];)c+=1,n+=1;l=c-l;let h=l<19?l-4:15;if(s>=15){f[u++]=240|h;let e=s-15;for(;e>=255;)f[u++]=255,e-=255;f[u++]=e}else f[u++]=s<<4|h;for(;s--;)f[u++]=t[g++];if(0===l)break;if(f[u+0]=r,f[u+1]=r>>>8,u+=2,l>=19){let e=l-19;for(;e>=255;)f[u++]=255,e-=255;f[u++]=e}g=c}let h=r-g;if(h>=15){f[u++]=240;let e=h-15;for(;e>=255;)f[u++]=255,e-=255;f[u++]=e}else f[u++]=h<<4;for(;h--;)f[u++]=t[g++];return new Uint8Array(f.buffer,0,u)}(this,e,t)},decodeBlock:function(e,t,n){if(e instanceof ArrayBuffer)e=new Uint8Array(e);else if(e instanceof Uint8Array==0)throw new TypeError;return function(e,t,n,r){let o=t.byteLength,i=new Uint8Array(l(e,r),0,r),a=n,s=0;for(;a<o;){let e=t[a++],n=e>>>4;if(0!==n){if(15===n){let e;for(;e=t[a++],255===e;)n+=255;n+=e}let e=a+n;for(;a<e;)i[s++]=t[a++];if(a===o)break}let r=t[a+0]|t[a+1]<<8;if(0===r||r>s)return;if(a+=2,n=4+(15&e),19===n){let e;for(;e=t[a++],255===e;)n+=255;n+=e}let f=s-r,l=s+n;for(;s<l;)i[s++]=i[f++]}return i}(this,e,t,n)}};const g=[60,114,111,98,108,111,120,33,137,255,13,10,26,10];function h(e){const t=performance.now(),n=new DataView(e);for(var r=0,o=0;o<e.byteLength;o++)if(n.getUint8(o)==g[0]){r=o;break}var s,l,c=[];for(o=0;o<14;o++)c.push(n.getUint8(o+r));console.assert((l=g,(s=c).length==l.length&&(s.forEach(((e,t)=>{if(e!=l[t])return!1})),!0)),"Invalid file signature."),console.log("Valid file signature.");var h=r+14,d=n.getUint16(h,!0);console.log("Version:",d);var U=h+2,y={classCount:n.getUint32(U,!0),instanceCount:n.getUint32(U+4,!0)};console.log("Header:",y);for(var b=U+16,p={},v=[],m=[],C=[];b<e.byteLength&&"END\0"!==p.signature;){b+=16+(p=u(n,b)).dataLength;const e=new DataView(p.payload.buffer);if("META"==p.signature){const t=e.getUint32(0,!0),n=[];var w=4;for(let r=0;r<t;r++){const[t,r]=i(e,w);w+=r+4;const[o,a]=i(e,w);w+=a+4,n.push({key:t,value:o})}}else if("SSTR"==p.signature);else if("INST"==p.signature){const t=e.getInt32(0,!0),[n,r]=i(e,4),o=(e.getUint8(8+r,!0),e.getUint32(8+r+1,!0)),s=a(e,8+r+1+4,o),f=[];for(let t=0;t<o;t++)f.push(e.getUint8(8+r+1+4+o+t));m[t]={className:n,instances:[]};var k=0;for(let e=0;e<o;e++)v[k+=s[e]]={ClassName:n,Children:[]},m[t].instances.push(k)}else if("PROP"==p.signature){const t=e.getInt32(0,!0),[n,r]=i(e,4),o=f(e,8+r,m[t].instances.length);if(o.values)for(let e=0;e<m[t].instances.length;e++)v[m[t].instances[e]][n]=o.values[e]}else if("PRNT"==p.signature){const t=e.getUint32(1,!0),n=a(e,5,t),r=a(e,5+4*t,t);var B=0,A=0;for(let e=0;e<t;e++){B+=n[e],A+=r[e];const t=v[B];A<0?C[B]=t:v[A].Children.push(t)}}}return console.log("Finished decoding file.\nTime elapsed:",performance.now()-t,"ms"),C}var d=t.J;export{d as decode};