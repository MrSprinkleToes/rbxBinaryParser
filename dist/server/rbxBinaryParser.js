var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{decode:()=>h});const r={1:"String",2:"Bool",3:"Int",4:"Float",5:"Double",6:"Udim",7:"Udim2",8:"Ray",9:"Faces",10:"Axes",11:"BrickColor",12:"Color3",13:"Vector2",14:"Vector3",15:"Vector2int16",16:"CFrame",17:"CFrameQuat",18:"Token",19:"Reference",20:"Vector3int16",21:"NumberSequence",22:"ColorSequence",23:"NumberRange",24:"Rect",25:"PhysicalProperties",26:"Color3uint8",27:"Int64",28:"SharedString",29:null,30:"Optional",31:"UniqueId",32:"Font"};function n(e,t,r,n){const o=new Array(r),i=4*r;for(let a=0;a<r;a++){let s=e.getUint8(t+a)<<24;s+=e.getUint8(t+(a+r)%i)<<16,s+=e.getUint8(t+(a+2*r)%i)<<8,s+=e.getUint8(t+(a+3*r)%i),o[a]=n?n(s):s}return o}function o(e,t,r){return n(e,t,r,(e=>e%2==1?-(e+1)/2:e/2))}function i(e,t){var r=e.getUint32(t,!0),n="";for(let o=0;o<r;o++)n+=String.fromCharCode(e.getUint8(t+4+o));return[n,r]}function a(e,t,r){return o(e,t,r)}function s(e,t,r){return n(e,t,r,(e=>function(e){const t=e>>>24;if(0===t)return 0;const r=2**(t-127)*(1+(e>>>1&8388607)/8388607);return 1&e?-r:r}(e)))}function f(e,t,n){const a=e.getUint8(t),f=r[a];var l=[];switch(f){case"String":var u=0;for(let r=0;r<n;r++){const[n,o]=i(e,t+1+u);l[r]=n,u+=o+4}break;case"Bool":for(let r=0;r<n;r++)l[r]=1===e.getUint8(t+1+r);break;case"Int":l=o(e,t+1,n);break;case"Float":l=s(e,t+1,n);break;case"Double":case"UDim":case"UDim2":case"Ray":case"Faces":case"Axes":case"BrickColor":case"Color3":case"Vector2":break;case"Vector3":const r=s(e,t+1,n),a=s(e,t+1+4*n,n),f=s(e,t+1+8*n,n);for(let e=0;e<n;e++)l[e]={x:r[e],y:a[e],z:f[e]};break;default:l=null}return{type:f,values:l}}let l=function(e,t){return(void 0===e.outputBuffer||e.outputBuffer.byteLength<t)&&(e.outputBuffer=new ArrayBuffer(t+65535&2147418112)),e.outputBuffer};function u(){this.hashTable=void 0,this.outputBuffer=void 0}function c(e,t){const r=[String.fromCharCode(e.getUint8(t+0)),String.fromCharCode(e.getUint8(t+1)),String.fromCharCode(e.getUint8(t+2)),String.fromCharCode(e.getUint8(t+3))].join(""),n=e.getUint32(t+4,!0),o=e.getUint32(t+8,!0),i=0==n?o:n,a=new Uint8Array(i);for(var s=0;s<i;s++)a[s]=e.getUint8(t+16+s);return{signature:r,compressedLength:n,uncompressedLength:o,dataLength:i,payload:0!=n?u.prototype.decodeBlock(a,0,o):a}}u.prototype={flavor:"js",init:function(){return Promise.resolve()},reset:function(){this.hashTable=void 0,this.outputBuffer=void 0},bytesInUse:function(){let e=0;return void 0!==this.hashTable&&(e+=this.hashTable.byteLength),void 0!==this.outputBuffer&&(e+=this.outputBuffer.byteLength),e},encodeBlock:function(e,t){if(e instanceof ArrayBuffer)e=new Uint8Array(e);else if(e instanceof Uint8Array==0)throw new TypeError;return function(e,t,r){let n=t.byteLength;if(n>=2113929216)throw new RangeError;let o=n-12,i=n-5;void 0===e.hashTable&&(e.hashTable=new Int32Array(65536)),e.hashTable.fill(-65536),t instanceof ArrayBuffer&&(t=new Uint8Array(t));let a=r+((s=n)>2113929216?0:s+(s/255|0)+16);var s;let f=new Uint8Array(l(e,a),0,a),u=0,c=r,g=0;for(;;){let r,n,a=t[u]<<8|t[u+1]<<16|t[u+2]<<24;for(;u<=o;){a=a>>>8|t[u+3]<<24;let o=(40503*a&65535)+(31153*a>>>16)&65535;if(r=e.hashTable[o],e.hashTable[o]=u,n=u-r,n<65536&&t[r+0]===(255&a)&&t[r+1]===(a>>>8&255)&&t[r+2]===(a>>>16&255)&&t[r+3]===(a>>>24&255))break;u+=1}if(u>o)break;let s=u-g,l=u;for(u+=4,r+=4;u<i&&t[u]===t[r];)u+=1,r+=1;l=u-l;let h=l<19?l-4:15;if(s>=15){f[c++]=240|h;let e=s-15;for(;e>=255;)f[c++]=255,e-=255;f[c++]=e}else f[c++]=s<<4|h;for(;s--;)f[c++]=t[g++];if(0===l)break;if(f[c+0]=n,f[c+1]=n>>>8,c+=2,l>=19){let e=l-19;for(;e>=255;)f[c++]=255,e-=255;f[c++]=e}g=u}let h=n-g;if(h>=15){f[c++]=240;let e=h-15;for(;e>=255;)f[c++]=255,e-=255;f[c++]=e}else f[c++]=h<<4;for(;h--;)f[c++]=t[g++];return new Uint8Array(f.buffer,0,c)}(this,e,t)},decodeBlock:function(e,t,r){if(e instanceof ArrayBuffer)e=new Uint8Array(e);else if(e instanceof Uint8Array==0)throw new TypeError;return function(e,t,r,n){let o=t.byteLength,i=new Uint8Array(l(e,n),0,n),a=r,s=0;for(;a<o;){let e=t[a++],r=e>>>4;if(0!==r){if(15===r){let e;for(;e=t[a++],255===e;)r+=255;r+=e}let e=a+r;for(;a<e;)i[s++]=t[a++];if(a===o)break}let n=t[a+0]|t[a+1]<<8;if(0===n||n>s)return;if(a+=2,r=4+(15&e),19===r){let e;for(;e=t[a++],255===e;)r+=255;r+=e}let f=s-n,l=s+r;for(;s<l;)i[s++]=i[f++]}return i}(this,e,t,r)}};const g=[60,114,111,98,108,111,120,33,137,255,13,10,26,10];function h(e){const t=performance.now(),r=new DataView(e);for(var n=0,o=0;o<e.byteLength;o++)if(r.getUint8(o)==g[0]){n=o;break}var s,l,u=[];for(o=0;o<14;o++)u.push(r.getUint8(o+n));console.assert((l=g,(s=u).length==l.length&&(s.forEach(((e,t)=>{if(e!=l[t])return!1})),!0)),"Invalid file signature."),console.log("Valid file signature.");var h=n+14,d=r.getUint16(h,!0);console.log("Version:",d);var y=h+2,b={classCount:r.getUint32(y,!0),instanceCount:r.getUint32(y+4,!0)};console.log("Header:",b);for(var U=y+16,p={},v=[],m=[],w=[];U<e.byteLength&&"END\0"!==p.signature;){U+=16+(p=c(r,U)).dataLength;const e=new DataView(p.payload.buffer);if("META"==p.signature){const t=e.getUint32(0,!0),r=[];var C=4;for(let n=0;n<t;n++){const[t,n]=i(e,C);C+=n+4;const[o,a]=i(e,C);C+=a+4,r.push({key:t,value:o})}}else if("SSTR"==p.signature);else if("INST"==p.signature){const t=e.getInt32(0,!0),[r,n]=i(e,4),o=(e.getUint8(8+n,!0),e.getUint32(8+n+1,!0)),s=a(e,8+n+1+4,o),f=[];for(let t=0;t<o;t++)f.push(e.getUint8(8+n+1+4+o+t));m[t]={className:r,instances:[]};var B=0;for(let e=0;e<o;e++)v[B+=s[e]]={ClassName:r,Children:[]},m[t].instances.push(B)}else if("PROP"==p.signature){const t=e.getInt32(0,!0),[r,n]=i(e,4),o=f(e,8+n,m[t].instances.length);if(o.values)for(let e=0;e<m[t].instances.length;e++)v[m[t].instances[e]][r]=o.values[e]}else if("PRNT"==p.signature){const t=e.getUint32(1,!0),r=a(e,5,t),n=a(e,5+4*t,t);var S=0,T=0;for(let e=0;e<t;e++){S+=r[e],T+=n[e];const t=v[S];T<0?w[S]=t:v[T].Children.push(t)}}}return console.log("Finished decoding file.\nTime elapsed:",performance.now()-t,"ms"),w}module.exports=t;